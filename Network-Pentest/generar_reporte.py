from fpdf import FPDF
from datetime import datetime

class ReportePentest(FPDF):
    def header(self):
        self.set_font("Arial", "B", 15)
        self.cell(0, 10, "Reporte de Escaneo de Red", border=True, ln=1, align="C")
        self.ln(10)

    def footer(self):
        self.set_y(-15)
        self.set_font("Arial", "I", 8)
        self.cell(0, 10, f"PÃ¡gina {self.page_no()}", align="C")

def crear_pdf(nombre_archivo, resultados):
    pdf = ReportePentest()
    pdf.add_page()
    pdf.set_font("Arial", size=12)
    
    # Metadatos del reporte
    pdf.cell(0, 10, f"Fecha: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}", ln=1)
    pdf.cell(0, 10, f"Analista: Kali User (Ruben)", ln=1)
    pdf.ln(10)
    
    # Contenido del escaneo
    pdf.set_font("Arial", "B", 12)
    pdf.cell(0, 10, "Resultados del Escaneo:", ln=1)
    pdf.set_font("Arial", size=10)
    pdf.multi_cell(0, 10, resultados)
    
    pdf.output(nombre_archivo)
    print(f"ðŸ“„ Reporte generado con Ã©xito: {nombre_archivo}")

# Ejemplo de uso
if __name__ == "__main__":
    datos_ejemplo = """
    Puerto 80: ABIERTO (HTTP)
    Puerto 443: ABIERTO (HTTPS)
    Puerto 22: CERRADO (SSH)
    Host detectado: 192.168.1.1
    """
    crear_pdf("Reporte_Escaneo.pdf", datos_ejemplo)